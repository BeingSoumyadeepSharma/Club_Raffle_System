"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[540],{44:function(t,e,n){n.d(e,{C:function(){return i}});var a=n(7573);n(7653);var r=n(9484),o=n(3061);let c=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600"}},defaultVariants:{variant:"default"}});function i(t){let{className:e,variant:n,...r}=t;return(0,a.jsx)("div",{className:(0,o.cn)(c({variant:n}),e),...r})}},747:function(t,e,n){n.d(e,{z:function(){return u}});var a=n(7573),r=n(7653),o=n(432),c=n(9484),i=n(3061);let s=(0,c.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=r.forwardRef((t,e)=>{let{className:n,variant:r,size:c,asChild:u=!1,...l}=t,d=u?o.g7:"button";return(0,a.jsx)(d,{className:(0,i.cn)(s({variant:r,size:c,className:n})),ref:e,...l})});u.displayName="Button"},999:function(t,e,n){n.d(e,{Ol:function(){return i},SZ:function(){return u},Zb:function(){return c},aY:function(){return l},ll:function(){return s}});var a=n(7573),r=n(7653),o=n(3061);let c=r.forwardRef((t,e)=>{let{className:n,...r}=t;return(0,a.jsx)("div",{ref:e,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",n),...r})});c.displayName="Card";let i=r.forwardRef((t,e)=>{let{className:n,...r}=t;return(0,a.jsx)("div",{ref:e,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",n),...r})});i.displayName="CardHeader";let s=r.forwardRef((t,e)=>{let{className:n,...r}=t;return(0,a.jsx)("h3",{ref:e,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",n),...r})});s.displayName="CardTitle";let u=r.forwardRef((t,e)=>{let{className:n,...r}=t;return(0,a.jsx)("p",{ref:e,className:(0,o.cn)("text-sm text-muted-foreground",n),...r})});u.displayName="CardDescription";let l=r.forwardRef((t,e)=>{let{className:n,...r}=t;return(0,a.jsx)("div",{ref:e,className:(0,o.cn)("p-6 pt-0",n),...r})});l.displayName="CardContent",r.forwardRef((t,e)=>{let{className:n,...r}=t;return(0,a.jsx)("div",{ref:e,className:(0,o.cn)("flex items-center p-6 pt-0",n),...r})}).displayName="CardFooter"},8151:function(t,e,n){n.d(e,{$N:function(){return p},Be:function(){return m},Vq:function(){return s},cN:function(){return g},cZ:function(){return f},fK:function(){return h},hg:function(){return u}});var a=n(7573),r=n(7653),o=n(4416),c=n(7342),i=n(3061);let s=o.fC,u=o.xz,l=o.h_;o.x8;let d=r.forwardRef((t,e)=>{let{className:n,...r}=t;return(0,a.jsx)(o.aV,{ref:e,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...r})});d.displayName=o.aV.displayName;let f=r.forwardRef((t,e)=>{let{className:n,children:r,...s}=t;return(0,a.jsxs)(l,{children:[(0,a.jsx)(d,{}),(0,a.jsxs)(o.VY,{ref:e,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...s,children:[r,(0,a.jsxs)(o.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(c.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=o.VY.displayName;let h=t=>{let{className:e,...n}=t;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...n})};h.displayName="DialogHeader";let g=t=>{let{className:e,...n}=t;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...n})};g.displayName="DialogFooter";let p=r.forwardRef((t,e)=>{let{className:n,...r}=t;return(0,a.jsx)(o.Dx,{ref:e,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",n),...r})});p.displayName=o.Dx.displayName;let m=r.forwardRef((t,e)=>{let{className:n,...r}=t;return(0,a.jsx)(o.dk,{ref:e,className:(0,i.cn)("text-sm text-muted-foreground",n),...r})});m.displayName=o.dk.displayName},6120:function(t,e,n){n.d(e,{I:function(){return c}});var a=n(7573),r=n(7653),o=n(3061);let c=r.forwardRef((t,e)=>{let{className:n,type:r,...c}=t;return(0,a.jsx)("input",{type:r,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:e,...c})});c.displayName="Input"},6801:function(t,e,n){n.d(e,{_:function(){return u}});var a=n(7573),r=n(7653),o=n(5962),c=n(9484),i=n(3061);let s=(0,c.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=r.forwardRef((t,e)=>{let{className:n,...r}=t;return(0,a.jsx)(o.f,{ref:e,className:(0,i.cn)(s(),n),...r})});u.displayName=o.f.displayName},8314:function(t,e,n){n.d(e,{FJ:function(){return w},GP:function(){return g},JP:function(){return o},Ks:function(){return i},RJ:function(){return v},Un:function(){return l},i8:function(){return c},jJ:function(){return f},jg:function(){return p},mz:function(){return m},nx:function(){return s},oQ:function(){return y},pz:function(){return d},qu:function(){return u},s$:function(){return x},uU:function(){return h},uc:function(){return r},yj:function(){return b}});let a=n(4850).env.NEXT_PUBLIC_API_URL||"http://localhost:3000/api";async function r(){let t=localStorage.getItem("auth_token"),e=await fetch("".concat(a,"/entities"),{headers:t?{Authorization:"Bearer ".concat(t)}:{}});return(await e.json()).data||[]}async function o(t){let e=localStorage.getItem("auth_token"),n=await fetch("".concat(a,"/entities"),{method:"POST",headers:{"Content-Type":"application/json",...e?{Authorization:"Bearer ".concat(e)}:{}},body:JSON.stringify(t)});return(await n.json()).data||null}async function c(t,e){let n=localStorage.getItem("auth_token"),r=await fetch("".concat(a,"/entities/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json",...n?{Authorization:"Bearer ".concat(n)}:{}},body:JSON.stringify(e)});return(await r.json()).data||null}async function i(t){let e=localStorage.getItem("auth_token"),n=await fetch("".concat(a,"/entities/").concat(t),{method:"DELETE",headers:e?{Authorization:"Bearer ".concat(e)}:{}});return(await n.json()).success}async function s(t){let e=localStorage.getItem("auth_token"),n=await fetch("".concat(a,"/tickets/purchase"),{method:"POST",headers:{"Content-Type":"application/json",...e?{Authorization:"Bearer ".concat(e)}:{}},body:JSON.stringify(t)});return(await n.json()).data||null}async function u(t){let e=localStorage.getItem("auth_token"),n=await fetch("".concat(a,"/tickets/reset-counter/").concat(t),{method:"POST",headers:e?{Authorization:"Bearer ".concat(e)}:{}});return(await n.json()).success}async function l(t){var e;let n=localStorage.getItem("auth_token"),r=await fetch("".concat(a,"/tickets/announcement"),{method:"POST",headers:{"Content-Type":"application/json",...n?{Authorization:"Bearer ".concat(n)}:{}},body:JSON.stringify(t)});return(null===(e=(await r.json()).data)||void 0===e?void 0:e.announcement)||null}async function d(t,e){let n=localStorage.getItem("auth_token"),r=await fetch("".concat(a,"/tickets/purchases/").concat(t,"/payment"),{method:"PATCH",headers:{"Content-Type":"application/json",...n?{Authorization:"Bearer ".concat(n)}:{}},body:JSON.stringify({isPaid:e})});return(await r.json()).data||null}async function f(t,e){let n=localStorage.getItem("auth_token"),r=await fetch("".concat(a,"/tickets/purchases/").concat(t,"/buyer"),{method:"PATCH",headers:{"Content-Type":"application/json",...n?{Authorization:"Bearer ".concat(n)}:{}},body:JSON.stringify({buyerName:e})});return(await r.json()).data||null}async function h(t){let e=localStorage.getItem("auth_token"),n=await fetch("".concat(a,"/tickets/purchases/").concat(t),{method:"DELETE",headers:e?{Authorization:"Bearer ".concat(e)}:{}});return(await n.json()).success}async function g(){let t=localStorage.getItem("auth_token"),e=await fetch("".concat(a,"/tickets/purchases"),{headers:t?{Authorization:"Bearer ".concat(t)}:{}});return(await e.json()).data||[]}async function p(t){let e=localStorage.getItem("auth_token"),n=await fetch("".concat(a,"/tickets/purchases/").concat(t,"/receipt/text"),{headers:e?{Authorization:"Bearer ".concat(e)}:{}});return n.ok?n.text():null}function m(){let t=localStorage.getItem("auth_token"),e="".concat(a,"/export/all");return t?"".concat(e,"?token=").concat(encodeURIComponent(t)):e}function y(t){let e=localStorage.getItem("auth_token"),n="".concat(a,"/export/entity/").concat(t);return e?"".concat(n,"?token=").concat(encodeURIComponent(e)):n}async function x(t){let e=localStorage.getItem("auth_token"),n=await fetch("".concat(a,"/sessions/active/").concat(t),{headers:e?{Authorization:"Bearer ".concat(e)}:{}});return(await n.json()).data||null}async function b(t){let e=localStorage.getItem("auth_token"),n=await fetch("".concat(a,"/sessions/start"),{method:"POST",headers:{"Content-Type":"application/json",...e?{Authorization:"Bearer ".concat(e)}:{}},body:JSON.stringify({entityId:t})}),r=await n.json();if(!r.success&&r.error)throw Error(r.error);return r.data||null}async function v(t){let e=localStorage.getItem("auth_token"),n=await fetch("".concat(a,"/sessions/close/").concat(t),{method:"POST",headers:e?{Authorization:"Bearer ".concat(e)}:{}}),r=await n.json();if(!r.success&&r.error)throw Error(r.error);return r.data||null}async function w(t,e){let n=localStorage.getItem("auth_token"),r="".concat(a,"/tickets/purchases/entity/").concat(t),o=new URLSearchParams;(null==e?void 0:e.sessionOnly)&&o.append("sessionOnly","true"),(null==e?void 0:e.sessionId)&&o.append("sessionId",e.sessionId),(null==e?void 0:e.startDate)&&o.append("startDate",e.startDate),(null==e?void 0:e.endDate)&&o.append("endDate",e.endDate),o.toString()&&(r+="?".concat(o.toString()));let c=await fetch(r,{headers:n?{Authorization:"Bearer ".concat(n)}:{}});return(await c.json()).data||[]}},8046:function(t,e,n){n.r(e),n.d(e,{AuthProvider:function(){return s},ROLE_LABELS:function(){return c},getAuthHeaders:function(){return l},useAuth:function(){return u}});var a=n(7573),r=n(7653);let o=n(4850).env.NEXT_PUBLIC_API_URL||"http://localhost:3000/api",c={superuser:"Superuser",club_owner:"Club Owner",event_manager:"Event Manager",staff:"Staff"},i=(0,r.createContext)(void 0);function s(t){let{children:e}=t,[n,c]=(0,r.useState)(null),[s,u]=(0,r.useState)(null),[l,d]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let t=localStorage.getItem("auth_token");t?(u(t),f(t)):d(!1)},[]);let f=async t=>{try{let e=await fetch("".concat(o,"/auth/me"),{headers:{Authorization:"Bearer ".concat(t)}});if(e.ok){let t=await e.json();c(t.data)}else localStorage.removeItem("auth_token"),u(null)}catch(t){console.error("Failed to fetch user:",t),localStorage.removeItem("auth_token"),u(null)}finally{d(!1)}},h=async(t,e)=>{try{let n=await fetch("".concat(o,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:e})}),a=await n.json();if(a.success&&a.data)return u(a.data.token),localStorage.setItem("auth_token",a.data.token),await f(a.data.token),!0;return!1}catch(t){return console.error("Login failed:",t),!1}},g=async t=>{if(!n||!s)return!1;try{if((await fetch("".concat(o,"/auth/users/").concat(n.id,"/raffler-name"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({rafflerName:t})})).ok)return c({...n,rafflerName:t}),!0;return!1}catch(t){return console.error("Failed to update raffler name:",t),!1}},p=async()=>{s&&await f(s)};return(0,a.jsx)(i.Provider,{value:{user:n,token:s,isLoading:l,login:h,logout:()=>{c(null),u(null),localStorage.removeItem("auth_token")},hasAccessToEntity:t=>!!n&&("superuser"===n.role||n.assignedEntities.includes(t)),canCreateClubs:()=>(null==n?void 0:n.role)==="superuser",canEditClubInfo:()=>!!n&&("superuser"===n.role||"club_owner"===n.role||"event_manager"===n.role),canManageUsers:()=>!!n&&"staff"!==n.role,updateRafflerName:g,refreshUser:p},children:e})}function u(){let t=(0,r.useContext)(i);if(void 0===t)throw Error("useAuth must be used within an AuthProvider");return t}function l(){let t=localStorage.getItem("auth_token");return t?{Authorization:"Bearer ".concat(t)}:{}}},3061:function(t,e,n){n.d(e,{cn:function(){return o}});var a=n(794),r=n(9654);function o(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,r.m6)((0,a.W)(e))}}}]);