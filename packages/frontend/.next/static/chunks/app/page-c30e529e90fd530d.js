(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9075:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(4788).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},3484:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(4788).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},8053:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(4788).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},886:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(4788).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},2480:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(4788).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3062:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(4788).Z)("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]])},8875:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(4788).Z)("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},6666:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(4788).Z)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]])},8869:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(4788).Z)("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]])},2151:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(4788).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},8267:function(e,t,s){Promise.resolve().then(s.bind(s,2143))},2143:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return k}});var a=s(7573),n=s(7653),l=s(2859),r=s(999),c=s(747),i=s(3925),d=s(2591),o=s(8603),m=s(9554),x=s(8314),h=s(8046),u=s(3062),p=s(9075),f=s(8869),y=s(8053);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let j=(0,s(4788).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);var b=s(2151);function k(){let[e,t]=(0,n.useState)([]),[s,k]=(0,n.useState)([]),[g,v]=(0,n.useState)(""),[N,w]=(0,n.useState)(!1),[Z,M]=(0,n.useState)(!0),{user:C,isLoading:E}=(0,h.useAuth)(),D=(0,l.useRouter)();(0,n.useEffect)(()=>{E||C?!E&&C&&"superuser"!==C.role&&D.push("/tickets"):D.push("/login")},[C,E,D]);let S=async()=>{try{let[e,s]=await Promise.all([(0,x.uc)(),(0,x.GP)()]);t(e),k(s)}catch(e){console.error("Failed to load data:",e)}finally{M(!1)}};(0,n.useEffect)(()=>{C&&S()},[C]);let z=s.reduce((e,t)=>e+t.ticketCount,0),H=s.reduce((e,t)=>e+t.totalPrice,0);return E||!C||Z||"superuser"!==C.role?(0,a.jsx)("div",{className:"flex items-center justify-center h-[60vh]",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"\uD83C\uDFB2"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})}):(0,a.jsxs)("div",{className:"space-y-6 md:space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:"Dashboard"}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Manage your party raffle system"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)(c.z,{variant:"outline",className:"gap-2 flex-1 sm:flex-none",asChild:!0,children:(0,a.jsxs)("a",{href:(0,x.mz)(),download:!0,children:[(0,a.jsx)(u.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden xs:inline",children:"Export"})]})}),(0,a.jsx)(i.U,{entities:e,onSuccess:e=>{v(e),w(!0),S()}})]})]}),(0,a.jsxs)("div",{className:"grid gap-3 sm:gap-4 grid-cols-2 md:grid-cols-3 lg:grid-cols-5",children:[(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3 sm:p-6 sm:pb-2",children:[(0,a.jsx)(r.ll,{className:"text-xs sm:text-sm font-medium",children:"Total Clubs"}),(0,a.jsx)(p.Z,{className:"h-4 w-4 text-muted-foreground hidden sm:block"})]}),(0,a.jsx)(r.aY,{className:"p-3 pt-0 sm:p-6 sm:pt-0",children:(0,a.jsx)("div",{className:"text-xl sm:text-2xl font-bold",children:e.length})})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3 sm:p-6 sm:pb-2",children:[(0,a.jsx)(r.ll,{className:"text-xs sm:text-sm font-medium",children:"Tickets Sold"}),(0,a.jsx)(f.Z,{className:"h-4 w-4 text-muted-foreground hidden sm:block"})]}),(0,a.jsx)(r.aY,{className:"p-3 pt-0 sm:p-6 sm:pt-0",children:(0,a.jsx)("div",{className:"text-xl sm:text-2xl font-bold",children:z})})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3 sm:p-6 sm:pb-2",children:[(0,a.jsx)(r.ll,{className:"text-xs sm:text-sm font-medium",children:"Revenue"}),(0,a.jsx)(y.Z,{className:"h-4 w-4 text-muted-foreground hidden sm:block"})]}),(0,a.jsx)(r.aY,{className:"p-3 pt-0 sm:p-6 sm:pt-0",children:(0,a.jsxs)("div",{className:"text-xl sm:text-2xl font-bold",children:["$",H.toFixed(2)]})})]}),(0,a.jsxs)(r.Zb,{className:"bg-gradient-to-r from-amber-500/10 to-yellow-500/10 border-amber-500/50",children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3 sm:p-6 sm:pb-2",children:[(0,a.jsx)(r.ll,{className:"text-xs sm:text-sm font-medium",children:"\uD83C\uDFC6 Prize"}),(0,a.jsx)(j,{className:"h-4 w-4 text-amber-500 hidden sm:block"})]}),(0,a.jsxs)(r.aY,{className:"p-3 pt-0 sm:p-6 sm:pt-0",children:[(0,a.jsxs)("div",{className:"text-xl sm:text-2xl font-bold text-amber-500",children:["$",Math.floor(.7*H).toFixed(2)]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground hidden sm:block",children:"70% of revenue"})]})]}),(0,a.jsxs)(r.Zb,{className:"col-span-2 md:col-span-1",children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3 sm:p-6 sm:pb-2",children:[(0,a.jsx)(r.ll,{className:"text-xs sm:text-sm font-medium",children:"Purchases"}),(0,a.jsx)(b.Z,{className:"h-4 w-4 text-muted-foreground hidden sm:block"})]}),(0,a.jsx)(r.aY,{className:"p-3 pt-0 sm:p-6 sm:pt-0",children:(0,a.jsx)("div",{className:"text-xl sm:text-2xl font-bold",children:s.length})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4",children:"Club Entities"}),0===e.length?(0,a.jsx)(r.Zb,{className:"p-6 sm:p-8 text-center",children:(0,a.jsx)("p",{className:"text-muted-foreground text-sm sm:text-base",children:"No clubs created yet."})}):(0,a.jsx)("div",{className:"grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,a.jsx)(o.m,{entity:e},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4",children:"Recent Purchases"}),0===s.length?(0,a.jsx)(r.Zb,{className:"p-6 sm:p-8 text-center",children:(0,a.jsx)("p",{className:"text-muted-foreground text-sm sm:text-base",children:"No purchases yet."})}):(0,a.jsx)("div",{className:"grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:s.slice(0,6).map(t=>(0,a.jsx)(m.Q,{purchase:t,entity:e.find(e=>e.id===t.entityId),onViewReceipt:e=>{v(e),w(!0)},onDelete:S,onUpdate:S},t.id))})]}),(0,a.jsx)(d.$,{receipt:g,open:N,onOpenChange:w})]})}},8603:function(e,t,s){"use strict";s.d(t,{m:function(){return r}});var a=s(7573),n=s(999),l=s(44);function r(e){var t;let{entity:s,onClick:r,selected:c}=e;return(0,a.jsxs)(n.Zb,{className:"cursor-pointer transition-all hover:shadow-lg ".concat(c?"ring-2 ring-primary":""),onClick:r,children:[(0,a.jsxs)(n.Ol,{className:"pb-2 p-3 sm:p-6 sm:pb-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-3xl sm:text-4xl",children:s.emoji}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-1 sm:gap-2 justify-end",children:[(0,a.jsxs)(l.C,{variant:"outline",className:"text-amber-500 border-amber-500 text-xs",children:["\uD83C\uDFC6 ",null!==(t=s.rafflePercentage)&&void 0!==t?t:70,"%"]}),(0,a.jsx)(l.C,{variant:c?"default":"secondary",className:"text-xs",children:s.name})]})]}),(0,a.jsx)(n.ll,{className:"text-lg sm:text-xl",children:s.displayName}),(0,a.jsx)(n.SZ,{className:"text-xs sm:text-sm line-clamp-2",children:s.tagline})]}),(0,a.jsx)(n.aY,{className:"p-3 pt-0 sm:p-6 sm:pt-0",children:(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Created: ",new Date(s.createdAt).toLocaleDateString()]})})]})}},388:function(e,t,s){"use strict";s.d(t,{fC:function(){return g},z$:function(){return N}});var a=s(7653),n=s(8556),l=s(6341),r=s(1082),c=s(7840),i=s(2884),d=s(9427),o=s(7575),m=s(5378),x=s(7573),h="Checkbox",[u,p]=(0,l.b)(h),[f,y]=u(h);function j(e){let{__scopeCheckbox:t,checked:s,children:n,defaultChecked:l,disabled:r,form:i,name:d,onCheckedChange:o,required:m,value:u="on",internal_do_not_use_render:p}=e,[y,j]=(0,c.T)({prop:s,defaultProp:l??!1,onChange:o,caller:h}),[b,k]=a.useState(null),[g,v]=a.useState(null),N=a.useRef(!1),w=!b||!!i||!!b.closest("form"),Z={checked:y,disabled:r,setChecked:j,control:b,setControl:k,name:d,form:i,value:u,hasConsumerStoppedPropagationRef:N,required:m,defaultChecked:!M(l)&&l,isFormControl:w,bubbleInput:g,setBubbleInput:v};return(0,x.jsx)(f,{scope:t,...Z,children:"function"==typeof p?p(Z):n})}var b="CheckboxTrigger",k=a.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:s,...l},c)=>{let{control:i,value:d,disabled:o,checked:h,required:u,setControl:p,setChecked:f,hasConsumerStoppedPropagationRef:j,isFormControl:k,bubbleInput:g}=y(b,e),v=(0,n.e)(c,p),N=a.useRef(h);return a.useEffect(()=>{let e=i?.form;if(e){let t=()=>f(N.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[i,f]),(0,x.jsx)(m.WV.button,{type:"button",role:"checkbox","aria-checked":M(h)?"mixed":h,"aria-required":u,"data-state":C(h),"data-disabled":o?"":void 0,disabled:o,value:d,...l,ref:v,onKeyDown:(0,r.Mj)(t,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,r.Mj)(s,e=>{f(e=>!!M(e)||!e),g&&k&&(j.current=e.isPropagationStopped(),j.current||e.stopPropagation())})})});k.displayName=b;var g=a.forwardRef((e,t)=>{let{__scopeCheckbox:s,name:a,checked:n,defaultChecked:l,required:r,disabled:c,value:i,onCheckedChange:d,form:o,...m}=e;return(0,x.jsx)(j,{__scopeCheckbox:s,checked:n,defaultChecked:l,disabled:c,required:r,onCheckedChange:d,name:a,form:o,value:i,internal_do_not_use_render:({isFormControl:e})=>(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(k,{...m,ref:t,__scopeCheckbox:s}),e&&(0,x.jsx)(Z,{__scopeCheckbox:s})]})})});g.displayName=h;var v="CheckboxIndicator",N=a.forwardRef((e,t)=>{let{__scopeCheckbox:s,forceMount:a,...n}=e,l=y(v,s);return(0,x.jsx)(o.z,{present:a||M(l.checked)||!0===l.checked,children:(0,x.jsx)(m.WV.span,{"data-state":C(l.checked),"data-disabled":l.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...e.style}})})});N.displayName=v;var w="CheckboxBubbleInput",Z=a.forwardRef(({__scopeCheckbox:e,...t},s)=>{let{control:l,hasConsumerStoppedPropagationRef:r,checked:c,defaultChecked:o,required:h,disabled:u,name:p,value:f,form:j,bubbleInput:b,setBubbleInput:k}=y(w,e),g=(0,n.e)(s,k),v=(0,i.D)(c),N=(0,d.t)(l);a.useEffect(()=>{if(!b)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!r.current;if(v!==c&&e){let s=new Event("click",{bubbles:t});b.indeterminate=M(c),e.call(b,!M(c)&&c),b.dispatchEvent(s)}},[b,v,c,r]);let Z=a.useRef(!M(c)&&c);return(0,x.jsx)(m.WV.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??Z.current,required:h,disabled:u,name:p,value:f,form:j,...t,tabIndex:-1,ref:g,style:{...t.style,...N,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function M(e){return"indeterminate"===e}function C(e){return M(e)?"indeterminate":e?"checked":"unchecked"}Z.displayName=w}},function(e){e.O(0,[801,136,831,284,540,228,293,16,744],function(){return e(e.s=8267)}),_N_E=e.O()}]);