"use strict";exports.id=288,exports.ids=[288],exports.modules={3071:(e,s,a)=>{a.d(s,{Z:()=>t});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(7879).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},6620:(e,s,a)=>{a.d(s,{Z:()=>t});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(7879).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},9056:(e,s,a)=>{a.d(s,{Z:()=>t});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(7879).Z)("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]])},4150:(e,s,a)=>{a.d(s,{Z:()=>t});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(7879).Z)("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},7356:(e,s,a)=>{a.d(s,{Q:()=>j});var t=a(7685),r=a(3810),i=a(3920),l=a(5090),n=a(4283),c=a(4887),d=a(9881),o=a(7879);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let m=(0,o.Z)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);var h=a(3197),x=a(4654),u=a(4150);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let p=(0,o.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var f=a(5943);function j({purchase:e,entity:s,onViewReceipt:a,onPaymentUpdate:o,onDelete:j,onUpdate:g}){let[y,N]=(0,r.useState)(e.isPaid),[v,k]=(0,r.useState)(e.buyerName),[b,w]=(0,r.useState)(!1),[C,F]=(0,r.useState)(e.buyerName),[Z,P]=(0,r.useState)(!1),[S,z]=(0,r.useState)(!1),D=async()=>{let s=await (0,d.jg)(e.id);s&&a?.(s)},T=async()=>{P(!0);try{let s=await (0,d.pz)(e.id,!y);s&&(N(s.isPaid),o?.())}catch(e){console.error("Failed to update payment status:",e)}finally{P(!1)}},R=async()=>{if(confirm(`Delete purchase for ${v}? This will remove tickets #${e.startTicketNumber}-#${e.endTicketNumber}.`)){z(!0);try{await (0,d.uU)(e.id)&&j?.()}catch(e){console.error("Failed to delete purchase:",e)}finally{z(!1)}}},E=async()=>{if(C.trim()){P(!0);try{let s=await (0,d.jJ)(e.id,C.trim());s&&(k(s.buyerName),w(!1),g?.())}catch(e){console.error("Failed to update buyer name:",e)}finally{P(!1)}}},M=()=>{F(v),w(!1)};return(0,t.jsxs)(i.Zb,{className:y?"border-green-500/50":"border-red-500/50",children:[t.jsx(i.Ol,{className:"pb-2 p-3 sm:p-6 sm:pb-2",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[(0,t.jsxs)(i.ll,{className:"text-base sm:text-lg flex items-center gap-2",children:[t.jsx(m,{className:"h-4 w-4 sm:h-5 sm:w-5 flex-shrink-0"}),b?(0,t.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[t.jsx(c.I,{value:C,onChange:e=>F(e.target.value),className:"h-7 w-24 sm:w-32 text-sm sm:text-base",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&E(),"Escape"===e.key&&M()}}),t.jsx(n.z,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0",onClick:E,disabled:Z,children:t.jsx(h.Z,{className:"h-4 w-4 text-green-500"})}),t.jsx(n.z,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0",onClick:M,children:t.jsx(x.Z,{className:"h-4 w-4 text-red-500"})})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx("span",{className:"truncate max-w-[120px] sm:max-w-none",children:v}),t.jsx(n.z,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 ml-1 flex-shrink-0",onClick:()=>w(!0),children:t.jsx(u.Z,{className:"h-3 w-3 text-muted-foreground"})})]}),e.isGift&&t.jsx("span",{title:"Gift",className:"flex-shrink-0",children:"\uD83C\uDF81"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 flex-wrap",children:[t.jsx(l.C,{variant:y?"default":"destructive",className:`text-xs ${y?"bg-green-500":""}`,children:y?"PAID":"UNPAID"}),(0,t.jsxs)(l.C,{variant:"secondary",className:"text-xs",children:[e.ticketCount," ticket",e.ticketCount>1?"s":""]})]})]})}),(0,t.jsxs)(i.aY,{className:"p-3 pt-0 sm:p-6 sm:pt-0",children:[(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[s&&(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-muted-foreground",children:"Club:"}),(0,t.jsxs)("span",{children:[s.emoji," ",s.displayName]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-muted-foreground",children:"Tickets:"}),(0,t.jsxs)("span",{children:["#",e.startTicketNumber," - #",e.endTicketNumber]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-muted-foreground",children:"Price/ticket:"}),(0,t.jsxs)("span",{children:["$",e.pricePerTicket]})]}),(0,t.jsxs)("div",{className:"flex justify-between font-semibold",children:[t.jsx("span",{children:"Total:"}),(0,t.jsxs)("span",{children:["$",e.totalPrice]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[t.jsx("span",{children:"Raffler:"}),t.jsx("span",{children:e.rafflerName})]}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[t.jsx("span",{children:"Date:"}),t.jsx("span",{children:new Date(e.createdAt).toLocaleString()})]}),e.isGift&&e.gifterName&&(0,t.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[t.jsx("span",{children:"\uD83C\uDF81 Gift from:"}),t.jsx("span",{children:e.gifterName})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 mt-3 sm:mt-4",children:[t.jsx(n.z,{variant:y?"outline":"default",size:"sm",className:`flex-1 min-w-[80px] gap-1 sm:gap-2 text-xs sm:text-sm ${y?"border-green-500 text-green-500 hover:bg-green-500/10":"bg-red-500 hover:bg-red-600"}`,onClick:T,disabled:Z,children:y?(0,t.jsxs)(t.Fragment,{children:[t.jsx(h.Z,{className:"h-3 w-3 sm:h-4 sm:w-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Paid"})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(x.Z,{className:"h-3 w-3 sm:h-4 sm:w-4"}),t.jsx("span",{className:"sm:hidden",children:"Pay"}),t.jsx("span",{className:"hidden sm:inline",children:"Mark as Paid"})]})}),(0,t.jsxs)(n.z,{variant:"outline",size:"sm",className:"gap-1 sm:gap-2 text-xs sm:text-sm",onClick:D,children:[t.jsx(p,{className:"h-3 w-3 sm:h-4 sm:w-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Receipt"})]}),t.jsx(n.z,{variant:"outline",size:"sm",className:"gap-1 sm:gap-2 text-red-500 hover:bg-red-500/10 hover:text-red-500",onClick:R,disabled:S,children:t.jsx(f.Z,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})]})]})}},8596:(e,s,a)=>{a.d(s,{U:()=>$});var t=a(7685),r=a(3810),i=a(4283),l=a(4887),n=a(7869),c=a(8118),d=a(6872),o=a(2724),m=a(9294),h=a(2530),x=a(2518),u=a(1090),p=a(3871),f="Checkbox",[j,g]=(0,d.b)(f),[y,N]=j(f);function v(e){let{__scopeCheckbox:s,checked:a,children:i,defaultChecked:l,disabled:n,form:c,name:d,onCheckedChange:o,required:h,value:x="on",internal_do_not_use_render:u}=e,[p,j]=(0,m.T)({prop:a,defaultProp:l??!1,onChange:o,caller:f}),[g,N]=r.useState(null),[v,k]=r.useState(null),b=r.useRef(!1),w=!g||!!c||!!g.closest("form"),C={checked:p,disabled:n,setChecked:j,control:g,setControl:N,name:d,form:c,value:x,hasConsumerStoppedPropagationRef:b,required:h,defaultChecked:!S(l)&&l,isFormControl:w,bubbleInput:v,setBubbleInput:k};return(0,t.jsx)(y,{scope:s,...C,children:"function"==typeof u?u(C):i})}var k="CheckboxTrigger",b=r.forwardRef(({__scopeCheckbox:e,onKeyDown:s,onClick:a,...i},l)=>{let{control:n,value:d,disabled:m,checked:h,required:x,setControl:u,setChecked:f,hasConsumerStoppedPropagationRef:j,isFormControl:g,bubbleInput:y}=N(k,e),v=(0,c.e)(l,u),b=r.useRef(h);return r.useEffect(()=>{let e=n?.form;if(e){let s=()=>f(b.current);return e.addEventListener("reset",s),()=>e.removeEventListener("reset",s)}},[n,f]),(0,t.jsx)(p.WV.button,{type:"button",role:"checkbox","aria-checked":S(h)?"mixed":h,"aria-required":x,"data-state":z(h),"data-disabled":m?"":void 0,disabled:m,value:d,...i,ref:v,onKeyDown:(0,o.Mj)(s,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,o.Mj)(a,e=>{f(e=>!!S(e)||!e),y&&g&&(j.current=e.isPropagationStopped(),j.current||e.stopPropagation())})})});b.displayName=k;var w=r.forwardRef((e,s)=>{let{__scopeCheckbox:a,name:r,checked:i,defaultChecked:l,required:n,disabled:c,value:d,onCheckedChange:o,form:m,...h}=e;return(0,t.jsx)(v,{__scopeCheckbox:a,checked:i,defaultChecked:l,disabled:c,required:n,onCheckedChange:o,name:r,form:m,value:d,internal_do_not_use_render:({isFormControl:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b,{...h,ref:s,__scopeCheckbox:a}),e&&(0,t.jsx)(P,{__scopeCheckbox:a})]})})});w.displayName=f;var C="CheckboxIndicator",F=r.forwardRef((e,s)=>{let{__scopeCheckbox:a,forceMount:r,...i}=e,l=N(C,a);return(0,t.jsx)(u.z,{present:r||S(l.checked)||!0===l.checked,children:(0,t.jsx)(p.WV.span,{"data-state":z(l.checked),"data-disabled":l.disabled?"":void 0,...i,ref:s,style:{pointerEvents:"none",...e.style}})})});F.displayName=C;var Z="CheckboxBubbleInput",P=r.forwardRef(({__scopeCheckbox:e,...s},a)=>{let{control:i,hasConsumerStoppedPropagationRef:l,checked:n,defaultChecked:d,required:o,disabled:m,name:u,value:f,form:j,bubbleInput:g,setBubbleInput:y}=N(Z,e),v=(0,c.e)(a,y),k=(0,h.D)(n),b=(0,x.t)(i);r.useEffect(()=>{if(!g)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,s=!l.current;if(k!==n&&e){let a=new Event("click",{bubbles:s});g.indeterminate=S(n),e.call(g,!S(n)&&n),g.dispatchEvent(a)}},[g,k,n,l]);let w=r.useRef(!S(n)&&n);return(0,t.jsx)(p.WV.input,{type:"checkbox","aria-hidden":!0,defaultChecked:d??w.current,required:o,disabled:m,name:u,value:f,form:j,...s,tabIndex:-1,ref:v,style:{...s.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function S(e){return"indeterminate"===e}function z(e){return S(e)?"indeterminate":e?"checked":"unchecked"}P.displayName=Z;var D=a(3197),T=a(4120);let R=r.forwardRef(({className:e,...s},a)=>t.jsx(w,{ref:a,className:(0,T.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...s,children:t.jsx(F,{className:(0,T.cn)("flex items-center justify-center text-current"),children:t.jsx(D.Z,{className:"h-4 w-4"})})}));R.displayName=w.displayName;var E=a(4177),M=a(5944),I=a(9881),q=a(3096);function $({entities:e,selectedEntityId:s,onSuccess:a}){let[c,d]=(0,r.useState)(!1),[o,m]=(0,r.useState)(!1),[h,x]=(0,r.useState)(s||""),[u,p]=(0,r.useState)(""),[f,j]=(0,r.useState)(""),[g,y]=(0,r.useState)("1"),[N,v]=(0,r.useState)("100"),[k,b]=(0,r.useState)(!1),[w,C]=(0,r.useState)(""),F=async e=>{e.preventDefault(),m(!0);try{let e=await (0,I.nx)({entityId:h,buyerName:u,rafflerName:f,ticketCount:parseInt(g),pricePerTicket:parseFloat(N),isGift:k,gifterName:k?w:void 0});e&&(a?.(e.receipt),d(!1),p(""),j(""),y("1"),b(!1),C(""))}catch(e){console.error("Failed to purchase tickets:",e)}finally{m(!1)}},Z=parseInt(g||"0")*parseFloat(N||"0");return(0,t.jsxs)(E.Vq,{open:c,onOpenChange:d,children:[t.jsx(E.hg,{asChild:!0,children:(0,t.jsxs)(i.z,{className:"gap-2",children:[t.jsx(q.Z,{className:"h-4 w-4"}),"Purchase Tickets"]})}),(0,t.jsxs)(E.cZ,{className:"sm:max-w-[425px]",children:[(0,t.jsxs)(E.fK,{children:[t.jsx(E.$N,{children:"Purchase Raffle Tickets"}),t.jsx(E.Be,{children:"Fill in the details to purchase raffle tickets."})]}),(0,t.jsxs)("form",{onSubmit:F,children:[(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[t.jsx(n._,{htmlFor:"entity",children:"Club Entity"}),(0,t.jsxs)(M.Ph,{value:h,onValueChange:x,children:[t.jsx(M.i4,{children:t.jsx(M.ki,{placeholder:"Select a club"})}),t.jsx(M.Bw,{children:e.map(e=>(0,t.jsxs)(M.Ql,{value:e.id,children:[e.emoji," ",e.displayName]},e.id))})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[t.jsx(n._,{htmlFor:"buyerName",children:"Buyer Name"}),t.jsx(l.I,{id:"buyerName",value:u,onChange:e=>p(e.target.value),placeholder:"Enter buyer's name",required:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[t.jsx(n._,{htmlFor:"rafflerName",children:"Raffler Name (Seller)"}),t.jsx(l.I,{id:"rafflerName",value:f,onChange:e=>j(e.target.value),placeholder:"Enter seller's name",required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[t.jsx(n._,{htmlFor:"ticketCount",children:"Number of Tickets"}),t.jsx(l.I,{id:"ticketCount",type:"number",min:"1",value:g,onChange:e=>y(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[t.jsx(n._,{htmlFor:"pricePerTicket",children:"Price per Ticket ($)"}),t.jsx(l.I,{id:"pricePerTicket",type:"number",min:"0",step:"0.01",value:N,onChange:e=>v(e.target.value),required:!0})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(R,{id:"isGift",checked:k,onCheckedChange:e=>b(!0===e)}),t.jsx(n._,{htmlFor:"isGift",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"\uD83C\uDF81 This is a gift"})]}),k&&(0,t.jsxs)("div",{className:"grid gap-2",children:[t.jsx(n._,{htmlFor:"gifterName",children:"Gifter Name (Who is giving this gift?)"}),t.jsx(l.I,{id:"gifterName",value:w,onChange:e=>C(e.target.value),placeholder:"Enter gifter's name",required:k})]}),(0,t.jsxs)("div",{className:"rounded-lg bg-muted p-3 text-center",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Price"}),(0,t.jsxs)("p",{className:"text-2xl font-bold",children:["$",Z.toFixed(2)]})]})]}),t.jsx(E.cN,{children:t.jsx(i.z,{type:"submit",disabled:o||!h,children:o?"Processing...":"Complete Purchase"})})]})]})]})}},8721:(e,s,a)=>{a.d(s,{$:()=>o});var t=a(7685),r=a(3810),i=a(4283),l=a(4177),n=a(3197),c=a(3071);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,a(7879).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);function o({receipt:e,open:s,onOpenChange:a}){let[o,m]=(0,r.useState)(!1),h=async()=>{await navigator.clipboard.writeText(e),m(!0),setTimeout(()=>m(!1),2e3)};return t.jsx(l.Vq,{open:s,onOpenChange:a,children:(0,t.jsxs)(l.cZ,{className:"sm:max-w-[500px] max-h-[90vh] overflow-hidden flex flex-col",children:[t.jsx(l.fK,{children:t.jsx(l.$N,{className:"text-center",children:"\uD83C\uDF9Fï¸ Purchase Receipt"})}),t.jsx("div",{className:"receipt-box my-4 overflow-auto flex-1",children:t.jsx("pre",{className:"text-xs sm:text-sm whitespace-pre-wrap break-words",children:e})}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[t.jsx(i.z,{variant:"outline",onClick:h,className:"gap-2 w-full sm:w-auto",children:o?(0,t.jsxs)(t.Fragment,{children:[t.jsx(n.Z,{className:"h-4 w-4"}),"Copied!"]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(c.Z,{className:"h-4 w-4"}),"Copy Receipt"]})}),(0,t.jsxs)(i.z,{variant:"outline",onClick:()=>{let s=new Blob([e],{type:"text/plain"}),a=URL.createObjectURL(s),t=document.createElement("a");t.href=a,t.download=`raffle-receipt-${Date.now()}.txt`,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(a)},className:"gap-2 w-full sm:w-auto",children:[t.jsx(d,{className:"h-4 w-4"}),"Download"]})]})]})})}}};